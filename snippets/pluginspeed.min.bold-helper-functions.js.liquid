var BOLD=BOLD||{};BOLD.language=BOLD.language||{},BOLD.helpers=BOLD.helpers||{};var Bold=BOLD.helpers;BOLD.helpers.cleanCart=function(e){if("object"!=typeof e||e.is_clean)return e;BOLD.rawCart=JSON.parse(JSON.stringify(e)),e.bold_original_total=e.total_price;var t=0,r=0;e.is_recurring=e.is_recurring||!1;for(var i in e.items)e.items[i].line=parseInt(i)+1,"object"==typeof e.items[i]&&(BOLD.helpers.cleanProperties(e.items[i]),e.is_recurring||(e.is_recurring=BOLD.helpers.isRecurringItem(e.items[i])),BOLD.helpers.setMultiplier(e.items[i]),BOLD.helpers.setRatio(e.items[i]),BOLD.helpers.setPriceSingle(e.items[i]),r+=BOLD.helpers.getDisplayQuantity(e.items[i]));for(var i in e.items)t+=BOLD.helpers.setPriceWithOptions(e,e.items[i]);return window.mixed_cart=e.is_recurring,e.total_price=t,e.item_count=r,e.is_clean=!0,BOLD.cart=e,e},BOLD.helpers.cleanProperties=function(e){if(e.Bold=e.Bold||{},e.formatted_properties="",e.properties){for(var t in e.properties)if("_"==t.slice(0,1)&&"_"!=t.slice(1,2)||"master_builder"==t||"builder_id"==t||"builder_info"==t||"frequency_type"==t||"frequency_type_text"==t||"frequency_num"==t||"group_id"==t||"discounted_price"==t||""==e.properties[t]){var r=t;"_"==r.slice(0,1)&&(r=r.replace("_","")),e.Bold[r]=e.properties[t],"builder_id"!==t&&"master_builder"!==t&&"builder_info"!==t||(e.builder_id_in_checkout=!0),delete e.properties[t]}e.formatted_properties=BOLD.helpers.propertiesDisplay(e.properties),e.bold_recurring_desc=BOLD.helpers.recurringDisplay(e.Bold),e.formatted_recurring_desc=BOLD.helpers.recurringFormattedDisplay(e.Bold),e.Bold.builder_id&&(e.builder_id=e.Bold.builder_id,e.builder_type=e.Bold.master_builder?"bold-master":"bold-hidden",e.is_master=!!e.Bold.master_builder,e.is_hidden=!e.Bold.master_builder),e.Bold.builder_info&&(e.builder_info=e.Bold.builder_info.split("~~"),e.builder_image_alt=e.builder_info[0],e.builder_image_src=e.builder_info[1],e.url="/apps/productbuilder/"+e.builder_info[2])}return e.properties},BOLD.helpers.getTrueProperties=function(e){var t=JSON.parse(JSON.stringify(e.properties));for(var r in e.Bold){var i="_";"master_builder"!==r&&"builder_id"!==r&&"builder_info"!==r||!e.builder_id_in_checkout||(i=""),t[i+r]=e.Bold[r]}return t},BOLD.helpers.isRecurringItem=function(e){return"object"!=typeof e.Bold&&BOLD.helpers.cleanProperties(e),!isNaN(parseInt(e.Bold.frequency_num))},BOLD.helpers.setMultiplier=function(e){"object"!=typeof e.Bold&&BOLD.helpers.cleanProperties(e);var t=100;return e.Bold&&e.Bold.ro_discount_percentage&&(t-=parseFloat(e.Bold.ro_discount_percentage)),e.discount_multiplier=t*=.01,e.discount_multiplier},BOLD.helpers.setRatio=function(e){return"object"!=typeof e.Bold&&BOLD.helpers.cleanProperties(e),e.qty_ratio=e.qty_ratio||1,e.true_qty=e.true_qty||e.quantity,e.Bold&&e.Bold.btm_ratio&&(e.qty_ratio*=parseInt(e.Bold.btm_ratio),e.is_btm=!0),e.Bold&&e.Bold.bold_ratio&&(e.qty_ratio*=parseInt(e.Bold.bold_ratio)),e.Bold.options_one_time_charge?(e.quantity=1,e.true_qty=e.qty_ratio,e.qty_ratio):(1!=e.qty_ratio&&(e.quantity=e.true_qty/e.qty_ratio),e.qty_ratio)},BOLD.helpers.setPriceSingle=function(e){if("object"!=typeof e.Bold&&BOLD.helpers.cleanProperties(e),e.original_price=e.original_price||e.price,e.price=e.original_price,e.discounts.length)for(var t=0;t<e.discounts.length;t++)e.price-=e.discounts[t].amount;return e.discount_multiplier&&1!=e.discount_multiplier&&(e.price=Math.round(e.price*e.discount_multiplier),e.line_price=e.price*e.quantity),e.qtyRatio&&1!=e.qtyRatio&&(e.price=e.price*e.qty_ratio),e.Bold.bold_priced_option&&(e.price=0,e.line_price=0),e.line_price},BOLD.helpers.setPriceWithOptions=function(e,t){if("undefined"==typeof t.price)return 0;if("object"!=typeof t.Bold&&BOLD.helpers.cleanProperties(t),t.original_price||BOLD.helpers.setPriceSingle(t),t.Bold.builder_id&&!t.Bold.master_builder)return 0;var r=t.price,n=0,a=t.Bold.builder_id;if(isNaN(parseInt(t.Bold.priced_options_count))){if(t.Bold.master_builder&&t.Bold.builder_id){r=0;for(var o in e.items)"object"!=typeof e.items[o].Bold&&BOLD.helpers.cleanProperties(e.items[o]),e.items[o].Bold.builder_id==a&&(e.items[o].Bold.options_one_time_charge?n+=e.items[o].price*e.items[o].qty_ratio:r+=e.items[o].price*e.items[o].qty_ratio),e.items[o].Bold.builder_id!=t.Bold.builder_id||e.items[o].Bold.master_builder||(e.items[o].price=0,e.items[o].line_price=0)}}else{for(i=0;i<parseInt(t.Bold.priced_options_count);i++)if(!isNaN(parseInt(t.Bold["extra_price_"+i]))){var s=parseInt(t.Bold["extra_price_"+i]),l=parseInt(t.Bold["qty_ratio_"+i]||1),p=t.Bold["one_time_charge_"+i]||!1;p?n+=s*l:r+=s*l}for(var o in e.items)"object"!=typeof e.items[o].Bold&&BOLD.helpers.cleanProperties(e.items[o]),e.items[o].Bold.builder_id!=a||e.items[o].Bold.master_builder||(e.items[o].original_price=e.items[o].original_price||e.items[o].price,e.items[o].price=0,e.items[o].line_price=0)}return t.one_time_charges=n,t.price=r,t.line_price_without_one_time_charges=t.price*t.quantity,t.line_price=t.line_price_without_one_time_charges+t.one_time_charges,t.formatted_onetime_desc=BOLD.helpers.onetimeDisplay(n),t.line_price},BOLD.helpers.getDisplayQuantity=function(e){return"object"!=typeof e.Bold&&BOLD.helpers.cleanProperties(e),"undefined"==typeof e.qty_ratio&&BOLD.helpers.setRatio(e),"bold-master"!==e.builder_type&&e.builder_id?0:e.quantity},BOLD.helpers.updateQtyBoxes=function(){jQuery.each(jQuery("[data-bold-ratio]"),function(e,t){1!=parseInt(jQuery(t).data("bold-ratio"))&&jQuery(t).find('[name="updates[]"]').length&&!jQuery(t).find(".bold-true-quantity").length&&jQuery(t).find('[name="updates[]"]').addClass("bold-display-quantity").removeAttr("name").parent().append('<input type="hidden" name="updates[]" class="bold-true-quantity">')}),jQuery.each(jQuery("[data-bold-ratio]:not(.bold-hidden), .bold-master"),function(e,t){var r,i=parseInt(jQuery(t).data("bold-ratio"))||1;if(r=jQuery(t).find(".bold-display-quantity").length?parseInt(jQuery(t).find(".bold-display-quantity").val()):parseInt(jQuery(t).find("[name^=updates]").val()),!isNaN(r)){var n=jQuery(t).closest("form").find("[data-bold-id="+jQuery(t).data("bold-id")+"]");n.length?jQuery.each(jQuery(n),function(e,t){var i=parseInt(jQuery(t).data("bold-ratio"))||1;jQuery(t).hasClass("bold-one-time-charge")?(jQuery(t).find('[name*="updates"]').val(i),jQuery(t).find(".bold-display-quantity").val(1)):(jQuery(t).find('[name*="updates"]').val(i*r),jQuery(t).find(".bold-display-quantity").val(r))}):(jQuery(t).find('[name*="updates"]').val(i*r),jQuery(t).find(".bold-display-quantity").val(r))}})},BOLD.helpers.removeBuilder=function(e,t,r){void 0!==e&&BOLD.helpers.getCart(function(i){BOLD.helpers.removeItemWithOptions(i,e,t,r)})},BOLD.helpers.validatePricedOptions=function(e,t){e.is_clean||(e=BOLD.helpers.cleanCart(e));var r=[];for(var i in e.items)e.items[i].Bold&&e.items[i].Bold.master_builder&&e.items[i].Bold.builder_id&&r.push(e.items[i].Bold.builder_id);var n=[];for(var i in e.items)e.items[i].Bold&&e.items[i].Bold.builder_id&&!r.includes(e.items[i].Bold.builder_id)&&n.push(e.items[i].Bold.builder_id);if(n.length){return void BOLD.helpers.removeMultipleBuilders(n,t)}"function"==typeof t&&t(e)},BOLD.helpers.removeMultipleBuilders=function(e,t,r){if(void 0===r&&(r=0),!e[r])return void("function"==typeof t&&BOLD.helpers.getCart(t));BOLD.helpers.removeBuilder(e[r],function(){BOLD.helpers.removeMultipleBuilders(e,t,r+1)})},BOLD.helpers.removeItemWithOptions=function(e,t,r,i){BOLD.helpers.updateItemWithOptions(e,t,0,r,i)},BOLD.helpers.upateBuilder=function(e,t,r,i){void 0!==e&&BOLD.helpers.getCart(function(n){BOLD.helpers.updateItemWithOptions(n,e,t,r,i)})},BOLD.helpers.updateItemWithOptions=function(e,t,r,i,n){e&&!e.isClean&&BOLD.helpers.cleanCart(e);var a="";for(var o in e.items)if("undefined"!=typeof e.items[o].quantity)if(a.length>1&&(a+="&"),t&&e.items[o].properties&&(e.items[o].properties.builder_id==t||e.items[o].properties._builder_id==t||e.items[o].builder_id==t)){var s=r;if(e.items[o].options_one_time_charge&&r&&(s=1),e.items[o].qty_ratio&&(s*=e.items[o].qty_ratio),s>1e6)return console.error("Update aborted: Updating quantities would put the product quantity over Shopify's 1,000,000 quantity limit."),"function"==typeof n&&n(),!1;a+="updates[]="+s}else e.items[o].true_qty?a+="updates[]="+e.items[o].true_qty:a+="updates[]="+e.items[o].quantity;var l={data:a,dataType:"json",url:"/cart/update.js",method:"POST",success:function(e){"function"==typeof i?i(e):"function"==typeof Shopify.onCartUpdate&&Shopify.onCartUpdate(e)},error:function(e,t){"function"==typeof n?n(e,t):"function"==typeof Shopify.onError&&Shopify.onError(e,t)}};jQuery.ajax(l)},BOLD.helpers.propertiesDisplay=function(e){if("object"!=typeof e)return"";var t='<div class="bold-properties">';for(var r in e)t+='<div class="bold_option_line"><span class="bold_option_title">'+r+'</span><span class="bold_option_seperator">: </span><span class="bold_option_value">',"string"==typeof e[r]&&e[r].indexOf("/uploads/")>-1?t+='<a href="'+e[r]+'" data-bold-lang="uploaded_file">'+(BOLD.language.uploaded_file||"Uploaded file")+"</a></span></div>":t+=e[r]+"</span></div>";return t+="</div>"},BOLD.helpers.recurringDisplay=function(e){return e&&e.frequency_num&&e.frequency_type_text?(BOLD.language.recurring_desc_prefix||"Delivered every ")+e.frequency_num+(BOLD.language.recurring_desc_spacer||" ")+e.frequency_type_text+(BOLD.language.recurring_desc_suffix||""):""},BOLD.helpers.recurringFormattedDisplay=function(e){return e&&e.frequency_num&&e.frequency_type_text?'<div class = "bold_recurring_desc"><span class="bold_ro_every"  data-bold-lang="recurring_desc_prefix">'+(BOLD.language.recurring_desc_prefix||"Delivered every ")+'</span><span class="bold_ro_frequency_num">'+e.frequency_num+"</span>"+(BOLD.language.recurring_desc_spacer?'<span class="bold_ro_frequency_spacer" data-bold-lang="recurring_desc_spacer">'+BOLD.language.recurring_desc_spacer+"</span>":" ")+'<span class="bold_ro_frequency_type_text">'+e.frequency_type_text+"</span>"+(BOLD.language.recurring_desc_suffix?'<span class="bold_ro_frequency_suffix" data-bold-lang="recurring_desc_suffix">'+BOLD.language.recurring_desc_suffix+"</span>":"")+"</div>":""},BOLD.helpers.onetimeDisplay=function(e,t){return e?(t||(t=BOLD.shop.money_format||Shopify.money_format||"$ {{ amount }}"),'<div class="bold_onetime_summary"><span class="bold_onetime_prefix" data-bold-lang="onetime_charge_prefix">'+(BOLD.language.onetime_charge_prefix||"Including one-time charge of ")+'</span><span class="bold_onetime_charge">'+BOLD.helpers.formatMoney(e,t)+'</span><span class="bold_onetime_suffix" data-bold-lang="onetime_charge_suffix">'+(BOLD.language.onetime_charge_suffix||"")+"</span></div>"):""},BOLD.helpers.setCartAttrObject=function(e,t,r,i){var n={attributes:{}};n.attributes[e]=encodeURIComponent(JSON.stringify(t));var a={url:"/cart/update.js",type:"post",dataType:"json",data:n,success:r||function(e){console.info(e)},error:i||function(e,t){console.error(e,t)}};jQuery.ajax(a)},BOLD.helpers.getCartAttrObj=function(e,t){if("object"!=typeof t)return void BOLD.helpers.getCart(function(t){BOLD.helpers.getCartAttrObj(e,t)});try{return BOLD.cart["data_"+e]=JSON.parse(decodeURIComponent(t.attributes[e]))}catch(t){return BOLD.cart["data_"+e]=!1}},BOLD.helpers.update_message_quickshop=function(e){jQuery("#shappify-qty-msg-"+e).html(jQuery('[data-product-id="'+e+'"] #variant_html_'+jQuery('[data-product-id="'+e+'"] [name="id"]').val()).html()),jQuery('[data-product-id="'+e+'"] [name="id"]:checked').length&&jQuery("#shappify-qty-msg-"+e).html(jQuery("#variant_html_"+jQuery("[name='id']:checked").val()).html());var t=jQuery(".shapp_qb_prod"),r=0;for(r=0;r<t.length;r++){var i=jQuery(t[r]).find("[name='id']").val(),n=jQuery("#variant_html_"+i).html();jQuery(t[r]).find(".shappify-qty-msg").html(n)}},BOLD.helpers.upgradeBTMFields=function(e){var t=jQuery(e);if(t.find(".btm_upgrade").remove(),t.find('.btm_quantity_input[name="properties[quantity]"]').attr("name","properties[_btm_quantity]"),t.find(".bold-btm .measurement_div").length){var r=1;t.find(".btm_quantity_input").length?r=parseInt(t.find(".btm_quantity_input").attr("name","properties[_btm_quantity]").val()):t.prepend('<input type="hidden" class="btm_upgrade btm_qty" name="properties[_btm_quantity]" value='+r+">");var i=parseInt(t.find('[name="quantity"]').last().val()),n=i/r,a='<input type="hidden" class="btm_upgrade btm_options" name="quantity" value='+r+">",o='<input type="hidden" class="btm_upgrade btm_ratio" name="properties[_btm_ratio]" value='+n+">";t.prepend(a).prepend(o)}},BOLD.helpers.calcBTMTotal=function(e,t){if(!e.btm||"function"!=typeof mathEval)return e.price;parsedFormula=e.btm.formula;for(var r in e.btm){var i=e.btm[r],n=jQuery(t).find('[name="properties['+i+']"]').val()||0;parsedFormula=parsedFormula.split("{"+i+"}").join(n)}return(Math.ceil(mathEval(parsedFormula))||1)*e.price},BOLD.helpers.calcOptionsTotal=function(e){var t=jQuery(e).find(".shappify_option_value [data-variant]:selected");if(!t.length)return 0;var r=0;return t.each(function(e,t){r+=100*jQuery(t).data("price")}),parseInt(r)},BOLD.helpers.calcTotal=function(e,t){return BOLD.helpers.calcBTMTotal(e,t)+BOLD.helpers.calcOptionsTotal(t)},BOLD.helpers.rivetsInit=function(){jQuery(document).on("cart.ready, cart.requestComplete",BOLD.helpers.rivetsUpdate)},BOLD.helpers.rivetsUpdate=function(){CartJS.updateItem=function(e,t){BOLD.helpers.changeItem(e,t,function(e){jQuery(document).trigger("cart.requestComplete",[e])})},BOLD.helpers.getCart(function(e){for(var t in CartJS.cart.items)if(isNaN(t))e.items[t]=CartJS.cart.items[t];else for(var r in CartJS.cart.items[t])"function"==typeof CartJS.cart.items[t][r]&&e.items[t]&&(e.items[t][r]=CartJS.cart.items[t][r]);for(var t in e)CartJS.cart[t]=e[t]})},BOLD.helpers.getCart=function(e,t){jQuery.getJSON("/cart.js",function(r){"object"==typeof t&&t.raw||BOLD.helpers.cleanCart(r),"function"==typeof e?e(r):"object"==typeof Shopify&&"function"==typeof Shopify.onCartUpdate&&Shopify.onCartUpdate(r)})},BOLD.helpers.addItemFromForm=function(e,t,r,i){var n,a,i=i||{},o=i.endpoint||"/cart/add";"string"==typeof e?(0==e.indexOf("#")&&(e=e.substr(1)),a=document.getElementById(e)):a=e.jquery?e[0]:e;var n,s="function"==typeof FormData;if(s&&(n=new FormData(a),"function"!=typeof n.getAll&&(s=!1)),!s){var l=a.length;n="";for(var p=0;p<l;p++){var u="string"==typeof a[p].type?a[p].type.toLowerCase():null;if("file"===u)return a.submit(),!1;var d="radio"!==u&&"checkbox"!==u||a[p].checked?a[p].value:null,c=a[p].name||"";d&&c&&(n+=(n.length?"&":"")+encodeURIComponent(c)+"="+encodeURIComponent(d))}}var _=new XMLHttpRequest;_.open("POST",o,!0),s||_.setRequestHeader("Content-type","application/x-www-form-urlencoded"),_.onload=function(e){try{e=JSON.parse(e.target.responseText)}catch(e){}if("function"==typeof t?t(e):"object"==typeof Shopify&&"function"==typeof Shopify.onItemAdded?Shopify.onItemAdded(e):"object"==typeof ShopifyAPI&&"function"==typeof ShopifyAPI.onItemAdded&&ShopifyAPI.onItemAdded(e),"function"==typeof beforeBoldSelectCallback&&a.variant&&a.variant.selector){var r=a.quantity?parseInt(a.quantity.value):1,i=a.variant;"undefined"!=typeof i.inventory_in_cart&&(i.inventory_in_cart+=r),"undefined"!=typeof i.inventory_remaining&&i.inventory_management&&(i.inventory_remaining-=r),i.inventory_remaining<=0&&i.inventory_management&&"deny"===i.inventory_policy&&(i.available=!1),beforeBoldSelectCallback(i,i.selector)}},"function"==typeof r&&(_.onerror=r),_.send(n)},BOLD.helpers.updateCartFromForm=function(e,t){var r={type:"POST",url:"/cart/update.js",data:jQuery("#"+e).serialize(),dataType:"json",success:function(e){"function"==typeof t?t(BOLD.helpers.cleanCart(e)):Shopify.onCartUpdate(BOLD.helpers.cleanCart(e))},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(r)},BOLD.helpers.changeItem=function(e,t,r,i){var n=e-1;BOLD.helpers.getCart(function(a){if(a.items[n].builder_id)BOLD.helpers.updateItemWithOptions(a,a.items[n].builder_id,t,r,i);else{a.items[n].qty_ratio&&(t*=a.items[n].qty_ratio);var o={type:"POST",url:"/cart/change.js",data:"quantity="+t+"&line="+e,dataType:"json",success:function(e){"function"==typeof r?r(e):"function"==typeof Shopify.onCartUpdate&&Shopify.onCartUpdate(e)},error:function(e,t){"function"==typeof i?i(e,t):"function"==typeof Shopify.onError&&Shopify.onError(e,t)}};jQuery.ajax(o)}})},BOLD.helpers.updateProperties=function(e,t,r,i,n,a){var o={url:"/cart/change.js",data:{line:e,quantity:t,properties:r},type:"post",dataType:"json",success:function(e){"function"==typeof i&&i(BOLD.helpers.cleanCart(e))},error:function(e,t){"function"==typeof n&&n(e,t)}};"object"==typeof a&&a.sequential&&(o.async=!1),jQuery.ajax(o)},BOLD.helpers.formatMoney=Shopify.formatMoney||function(e,t){function r(e,t){return void 0===e?t:e}function i(e,t,i,n){if(t=r(t,2),i=r(i,","),n=r(n,"."),isNaN(e)||null==e)return 0;e=(e/100).toFixed(t);var a=e.split(".");return a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+i)+(a[1]?n+a[1]:"")}"string"==typeof e&&(e=e.replace(".",""));var n="",a=/\{\{\s*(\w+)\s*\}\}/,o=t||this.money_format;switch(o.match(a)[1]){case"amount":n=i(e,2);break;case"amount_no_decimals":n=i(e,0);break;case"amount_with_comma_separator":n=i(e,2,".",",");break;case"amount_no_decimals_with_comma_separator":n=i(e,0,".",",")}return o.replace(a,n)},[].includes||(Array.prototype.includes=function(e){"use strict";var t=Object(this),r=parseInt(t.length)||0;if(0===r)return!1;var i,n=parseInt(arguments[1])||0;n>=0?i=n:(i=r+n)<0&&(i=0);for(var a;i<r;){if(a=t[i],e===a||e!==e&&a!==a)return!0;i++}return!1});